/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.Canvas=function(_264d){if(_264d){this.construct(_264d);}this.enableSmoothFigureHandling=false;this.canvasLines=new draw2d.ArrayList();};draw2d.Canvas.prototype.type="Canvas";draw2d.Canvas.prototype.construct=function(_264e){this.canvasId=_264e;this.html=document.getElementById(this.canvasId);this.scrollArea=document.body.parentNode;};draw2d.Canvas.prototype.setViewPort=function(divId){this.scrollArea=document.getElementById(divId);};draw2d.Canvas.prototype.addFigure=function(_2650,xPos,yPos,_2653){if(this.enableSmoothFigureHandling==true){if(_2650.timer<=0){_2650.setAlpha(0.001);}var _2654=_2650;var _2655=function(){if(_2654.alpha<1){_2654.setAlpha(Math.min(1,_2654.alpha+0.05));}else{window.clearInterval(_2654.timer);_2654.timer=-1;}};if(_2654.timer>0){window.clearInterval(_2654.timer);}_2654.timer=window.setInterval(_2655,30);}_2650.setCanvas(this);if(xPos&&yPos){_2650.setPosition(xPos,yPos);}if(_2650 instanceof draw2d.Line){this.canvasLines.add(_2650);this.html.appendChild(_2650.getHTMLElement());}else{var obj=this.canvasLines.getFirstElement();if(obj==null){this.html.appendChild(_2650.getHTMLElement());}else{this.html.insertBefore(_2650.getHTMLElement(),obj.getHTMLElement());}}if(!_2653){_2650.paint();}};draw2d.Canvas.prototype.removeFigure=function(_2657){if(this.enableSmoothFigureHandling==true){var oThis=this;var _2659=_2657;var _265a=function(){if(_2659.alpha>0){_2659.setAlpha(Math.max(0,_2659.alpha-0.05));}else{window.clearInterval(_2659.timer);_2659.timer=-1;oThis.html.removeChild(_2659.html);_2659.setCanvas(null);}};if(_2659.timer>0){window.clearInterval(_2659.timer);}_2659.timer=window.setInterval(_265a,20);}else{this.html.removeChild(_2657.html);_2657.setCanvas(null);}if(_2657 instanceof draw2d.Line){this.canvasLines.remove(_2657);}};draw2d.Canvas.prototype.getEnableSmoothFigureHandling=function(){return this.enableSmoothFigureHandling;};draw2d.Canvas.prototype.setEnableSmoothFigureHandling=function(flag){this.enableSmoothFigureHandling=flag;};draw2d.Canvas.prototype.getWidth=function(){return parseInt(this.html.style.width);};draw2d.Canvas.prototype.getHeight=function(){return parseInt(this.html.style.height);};draw2d.Canvas.prototype.setBackgroundImage=function(_265c,_265d){if(_265c!=null){if(_265d){this.html.style.background="transparent url("+_265c+") ";}else{this.html.style.background="transparent url("+_265c+") no-repeat";}}else{this.html.style.background="transparent";}};draw2d.Canvas.prototype.getY=function(){return this.y;};draw2d.Canvas.prototype.getX=function(){return this.x;};draw2d.Canvas.prototype.getAbsoluteY=function(){var el=this.html;var ot=el.offsetTop;while((el=el.offsetParent)!=null){ot+=el.offsetTop;}return ot;};draw2d.Canvas.prototype.getAbsoluteX=function(){var el=this.html;var ol=el.offsetLeft;while((el=el.offsetParent)!=null){ol+=el.offsetLeft;}return ol;};draw2d.Canvas.prototype.getScrollLeft=function(){return this.scrollArea.scrollLeft;};draw2d.Canvas.prototype.getScrollTop=function(){return this.scrollArea.scrollTop;};